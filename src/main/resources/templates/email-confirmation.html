<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="../static/output.css" rel="stylesheet"/>
    <title>Document</title>
</head>
<body>
    <header th:replace="fragments/header :: header"></header>
    <div id="splinter" class="h-12"></div>
    <div id="form" class="flex items-center flex-col space-y-8">
        <div id="form-title" class="flex flex-col items-center space-y-6">
            <p class="text-3xl font-semibold">Email BestÃ¤tigung</p>
            <p class="text-medium font-font text-center text-black w-2/3">Geben Sie den Code ein, der mit der E-Mail an die Adresse gesendet wurde, die Sie im Registrierungsformular angegeben haben</p>
        </div>
        <form method="POST" th:object="${code}" class="flex flex-col space-y-6 w-1/3" style="min-width: 319px;">
          <input 
            type="hidden" 
            th:name="${_csrf.parameterName}" 
            th:value="${_csrf.token}" />     
          <div id="fields_code" class="flex flex-col">
                    <label class="text-medium">Code</label>
                    <input th:field="*{code}" class="uc-text-smooth font-light text-4xl rounded-md py-1 text-center h-12 border border-black" maxlength="10" name="code" type="code" placeholder="XXXXXXXXXX"/>
                </div>
            <div class="flex justify-center">
                <button class="font-semibold text-xl w-full h-12 text-white bg-red-600 hover:bg-red-700 font-semibold rounded-lg" >Weiter</button>
            </div>
        </form>
    </div>


    <script>
    
    const forceKeyPressUppercase = (e) => {
      let el = e.target;
      let maxAllowedLengthString = el.maxLength;
      let charInput = e.keyCode;
      if((charInput >= 97) && (charInput <= 122)) { // lowercase
        if(!e.ctrlKey && !e.metaKey && !e.altKey) { // no modifier key
          let newChar = charInput - 32;
          let start = el.selectionStart;
          let end = el.selectionEnd;

          if (maxAllowedLengthString != null) {
            if (maxAllowedLengthString == el.value.length) {
                el.blur();
            } else {
                el.value = el.value.substring(0, start) + String.fromCharCode(newChar) + el.value.substring(end);
                el.setSelectionRange(start+1, start+1);
                e.preventDefault();
            }
          } else {
                el.value = el.value.substring(0, start) + String.fromCharCode(newChar) + el.value.substring(end);
                el.setSelectionRange(start+1, start+1);
                e.preventDefault();
          }

        }
      }
    };
  
    document.querySelectorAll(".uc-text-smooth").forEach(function(current) {
      current.addEventListener("keypress", forceKeyPressUppercase);
    });
  
  </script>
</body>
</html>